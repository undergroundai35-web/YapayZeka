@using UniCP.Models.MsK
@using System.Security.Claims
@{
    var currentController = ViewContext.RouteData.Values["controller"]?.ToString();
    var currentAction = ViewContext.RouteData.Values["action"]?.ToString();
    
    string IsActive(string controller, string action = null)
    {
        if (string.IsNullOrEmpty(action))
            return currentController == controller ? "bg-[#DD2F42] text-white shadow-lg shadow-[#DD2F42]/20" : "text-slate-400 hover:bg-slate-800/50 hover:text-white";
            
        return (currentController == controller && currentAction == action) ? "bg-[#DD2F42] text-white shadow-lg shadow-[#DD2F42]/20" : "text-slate-400 hover:bg-slate-800/50 hover:text-white";
    }
}

<div class="w-64 flex flex-col shrink-0 text-white border-r border-white/5 transition-all duration-300 animate-slide-left" style="background-color: var(--bg-sidebar);">
    <div class="p-10 flex flex-col items-center justify-center">
        <!-- SVG Dots Logo (Small) -->
        <svg width="40" height="40" viewBox="0 0 100 100" class="logo-dots-pulse mb-3">
            <circle cx="50" cy="20" r="10" fill="#DD2F42" />
            <circle cx="80" cy="50" r="10" fill="#DD2F42" opacity="0.8" />
            <circle cx="50" cy="80" r="10" fill="#DD2F42" opacity="0.6" />
            <circle cx="20" cy="50" r="10" fill="#DD2F42" opacity="0.4" />
        </svg>
        <span class="text-[12px] font-light tracking-[0.4em] text-white/90 uppercase">Connect</span>
    </div>

    <!-- Navigation Menu -->
    <div class="px-4 py-2">
        <div class="text-[10px] font-normal text-slate-500 uppercase tracking-[0.2em] mb-4 px-4">
            MÜŞTERİ PANELİ
        </div>
    </div>

    <nav class="flex-1 px-3 space-y-1">
        <a href="/Musteri/Index" class="w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all @IsActive("Musteri", "Index")">
            <i class="bi bi-grid text-lg"></i> 
            <span class="font-normal text-sm">Dashboard</span>
        </a>
        
        <a href="/Talepler/Index" class="w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all @IsActive("Talepler")">
            <i class="bi bi-briefcase text-lg"></i> 
            <span class="font-normal text-sm">Talepler</span>
        </a>

        <a href="/N4B/Index" class="w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all @IsActive("N4B")">
            <i class="bi bi-headset text-lg"></i> 
            <span class="font-normal text-sm">Destek</span>
        </a>

        <a href="/Finans/Index" class="w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all @IsActive("Finans")">
            <i class="bi bi-file-earmark-text text-lg"></i> 
            <span class="font-normal text-sm">Finans</span>
        </a>

        <a href="/Lisanslar/Index" class="w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all @IsActive("Lisanslar")">
            <i class="bi bi-credit-card text-lg"></i> 
            <span class="font-normal text-sm">Lisanslar</span>
        </a>
    </nav>

    <!-- Sidebar Bottom Section -->
    <div class="mt-auto p-4 space-y-4">
        <!-- Live Status Pill -->
        <div class="mx-2 px-3 py-2 rounded-lg bg-emerald-950/30 border border-emerald-900/30 flex items-center space-x-3">
            <div class="relative flex h-2 w-2">
                <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"></span>
                <span class="relative inline-flex rounded-full h-2 w-2 bg-emerald-500"></span>
            </div>
            <span class="text-[10px] font-normal text-emerald-400 tracking-wide uppercase">Canlı Entegrasyon: Aktif</span>
        </div>

        <!-- Utility Buttons -->
        <div class="space-y-1">
            <button class="w-full flex items-center space-x-3 px-4 py-2 text-slate-400 hover:text-white transition-colors text-sm">
                <i class="bi bi-moon-stars"></i>
                <span>Gece Modu</span>
            </button>
            <a href="/Account/Logout" class="w-full flex items-center space-x-3 px-4 py-2 text-red-400 hover:text-red-300 transition-colors text-sm">
                <i class="bi bi-box-arrow-right"></i>
                <span class="font-normal">Çıkış Yap</span>
            </a>
        </div>

        <!-- User Profile Card -->
        <div class="p-4 rounded-2xl bg-slate-900/50 flex items-center space-x-3 border border-slate-800/50">
            <div class="w-10 h-10 rounded-xl bg-slate-800 flex items-center justify-center border border-slate-700 font-medium text-slate-300">
                @User.Identity.Name?[0].ToString().ToUpper()
            </div>
            <div class="flex-1 min-w-0">
                <p class="text-sm font-medium text-white truncate">@User.Identity.Name</p>
                <p class="text-[10px] text-slate-500 font-normal">IT Direktörü</p>
            </div>
            <button class="text-slate-500 hover:text-white">
                <i class="bi bi-three-dots-vertical"></i>
            </button>
        </div>
    </div>
</div>
